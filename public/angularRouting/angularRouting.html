<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <!--<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.13/angular.min.js"></script>-->
  <!--<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">-->
  <link rel="stylesheet" media="all" href="../stylesheets/bootstrap-min.css">
  <link rel="stylesheet" media="all" href="../theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="../theme/css/phone.css">


  <script src="../js/jquery-1.11.1.min.js"></script>
  <script src="../js/presenter.js"></script>

  <base target="_blank">
  <style>
    code {
      color: darkblue;
    }
  </style>

  <!-- This opens all links in a new tab. -->
  <script data-main="../js/slides" src="../js/require-1.0.8.min.js"></script>

  <!--In order to have more than one slideset in the project-->
  <script src="slides.js"></script>

</head>

<!--Setup Angular for the full slide-set-->
<!--<body ng-app="SlideApp" style="opacity: 0">-->
<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground" style="background: #00163B">
    <aside class="gdbar"><img src="../images/logo.png" style="width: 200px;"></aside>
    <hgroup class="auto-fadein" style="color: white;">
      <div style="float: left;">
        <h1 data-config-title style="float:left;"></h1>

        <h2 data-config-subtitle></h2>

        <p data-config-presenter></p>
      </div>
      <div style="float:left;margin-left: 2em;"><img src="../../images/AngularLogo.png" style="float:left">
      </div>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Angular - The bits and pieces that <br/> make up an application</h2>
    </hgroup>
    <article>
      <p style="margin-top: -25px;">We have looked at Modules and Controllers. Today we will look at Routes (and the
        config() function) </p>
      <img src="images/angularBits.png" style="width: 80%;margin-left: 10%;">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Angular Routing and Views</h2>

      <h3>First a short recap on SPA's</h3>
    </hgroup>

    <article>
      <p class="smaller" style="margin-top: -35px;">A single-page application (SPA) is a web application or web site
        that fits on a single web page with the goal of providing a more fluid user experience akin to a desktop
        application.</p>
      <ul>
        <li>In a SPA, either all necessary code – HTML, JavaScript, and CSS – is retrieved with a single page load
          or the appropriate resources are dynamically loaded and added to the page as necessary, usually in
          response
          to user actions
        </li>
        <li> The page does not reload at any point in the process, nor does control transfer to another
          page, <b style="color: #006600">although modern web technologies (such as those included in HTML5) can provide
            the perception and
            navigability of separate logical pages in the application</b>.
        </li>
        <li>Interaction with the single page application
          often involves dynamic communication with the web server behind the scenes.
        </li>
      </ul>
      <p style="color: #000066; font-weight: bold">So, a SPA can have many views, giving users the feeling of navigating
        a traditional application</p>
      <footer class="source"><a href="http://en.wikipedia.org/wiki/Single-page_application">Single Page
        Applications</a></footer>
    </article>

  </slide>


  <script>
    $(document).ready(function () {

      $("#view").exPresenter({
        directory: "examples/ex1-views/",
        codeClass: "prettyprint pre16",
        codeStyle: "display:none",
        presenterStyle: "width:900px; height:490px;",
        btnDivStyle: "display:none"
      });
    })
  </script>

  <slide>
    <hgroup>
      <h2>Angular Routing and Views</h2>
      <h3>Views and <em>ngView</em></h3>
    </hgroup>
    <article>
      <div id="view" style="margin-top: -35px;"></div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Angular Routing</h2>
    </hgroup>
    <article>
      <div class="row">
        <div class="col-md-5">
          <img src="images/Routing.PNG" style="width: 90%;margin-left: 10%;">
        </div>
        <div class="col-md-7">
          <p>
            With Angular's Routing Service we can divide a SPA into multiple views making it much more manageable.</p>

          <p>The service makes it easy to combine:</p>
          <ul style="color:#000066">
            <li>A Controller</li>
            <li>A View Template</li>
            <li>The current URL location in the browser</li>
          </ul>
          <p>Using this feature we can implement deep linking, which lets us utilize the browser's history (back and
            forward navigation) and bookmarks.</p>

          </p>
        </div>
      </div>
    </article>
  </slide>


  <script>
    $(document).ready(function () {

      $("#view2").exPresenter({
        directory: "examples/ex1-views/",
        codeClass: "prettyprint pre16",
        codeStyle: "height:400px;",
        presenterStyle: "display:none"

      });
    })
  </script>

  <slide>
    <hgroup>
      <h2>The Code for the example</h2>
    </hgroup>
    <article>
      <div id="view2" style="margin-top: -10px;"></div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2 style="font-size: 32px;">We will use this example for the remaining of this lesson</h2>
    </hgroup>
    <article>
      <p style="margin-top: -25px;">Create a new NetBeans Web-project</p>
      <p>Add the files given on the previous slide (fetch from Plunker) to the Web Pages Folder as sketched below:</p>
      <div class="col-md-6">
        <img src="images/folder.PNG" style="margin-left:50px;width:60%">
      </div>
      <img class="col-md-6" style="margin:50px;width:25%" src="../images/Demo.png">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2 style="font-size: 41px;">RouteProvider and the config() function</h2>
    </hgroup>
    <article>
      <p style="margin-top: -25px;">Angular offers several ways to build reusable components with
        providers at the core of all of them
        Providers can only be injected into <em>config</em> functions via the Module aPI.
      </p>

      <p>Routes in Angular are declared via the <b>$routeProvider</b>, which is the provider of the $route service.
        Follow the pattern below each time your are using the routprovider</p>
      <pre class="prettyprint pre17">
var app = angular.module('viewApp', [<b>'ngRoute'</b>]);

app.config(function (<b>$routeProvider</b>) {
  $routeProvider
  ....</pre>
      <p class="smaller" style="color: #000066;margin-top: 10px;">
        <b>Important!</b> As of AngularJS version 1.2, ngRoute is in its <em>own module</em> and must be imported like:
      </p>
      <pre class="prettyprint pre17">&lt;script src=&quot;pathToAngularFiles/angular-route.js&quot;&gt;</pre>
      <p class="smaller" style="color: #000066;margin-top: 10px;">
        And loaded into the application as a dependent module (<b>['ngRoute']</b> above)</p>
    </article>
  </slide>

  <script>
    $(document).ready(function () {

      $("#view3").exPresenter({
        directory: "examples/ex1-views/",
        codeClass: "prettyprint pre16",
        codeStyle: "height:300px;",
        presenterStyle: "display:none",
        manifest: "manifest2.json"

      });
    })
  </script>

  <slide>
    <hgroup>
      <h2>The routeProvider API</h2>
    </hgroup>
    <article>

      <p style="margin-top: -25px;">The routeProvider has a very simple API with only two methods:</p>
      <img src="images/routeproviderapi.PNG" style="margin-top:-15px;margin-bottom: 10px;">
      <ul class="smaller">
        <li><b>when:</b> Matches a URL-pattern and "marries" the template for this pattern with a Controller</li>
        <li><b>otherwise:</b>Here, we don't pass in a pattern, because this takes care of <em>"everything else"</em>
        </li>
      </ul>
      <div class="build">
        <div id="view3"/>
      </div>
    </article>
  </slide>

  <script>
    $(document).ready(function () {

      $("#view4").exPresenter({
        directory: "examples/ex2-routeparams/",
        codeClass: "prettyprint pre16",
        codeStyle: "float:left;margin-right:5px;margin-bottom:5px;background-color:white;",
        presenterStyle: "display:none"
      });
    })
  </script>

  <slide>
    <hgroup>
      <h2>Passing in parameters in route URLs </h2>
    </hgroup>
    <article>
      <p style="margin-top: -30px;">We can add parameters to our routes like: <b>/:id</b>< or
        <b>/:firstName/:lastName</b>
      </p>

      <p class="smaller" style="color:#000066;margin-top:-15px;;">To use the parameters we must inject the $routeParams
        service into our route controller
        and parameters will be available as sketched below:</p>
    <pre class="prettyprint pre17">
app.controller("RouteParamController",function($scope,<b>$routeParams</b>){
  $scope.id = <b>$routeParams.id</b>;
})</pre>
      <div class="build" style="margin-top: 12px;">
        <div class="row">
          <div class="col-md-9">
            <div id="view4"></div>
          </div>
          <div class="col-md-2">
            <br/><br/>
            <a href="examples/ex2-routeparams/index.html" target="_blank">Try</a>
          </div>
        </div>
    </article>
  </slide>


  <slide>
    <hgroup>
      <h2>Reuse data between (ng-)views</h2>
    </hgroup>
    <article>
      <p>You will often find yourself in the situation that data has to reused between your views.</p>
      <p>A naïve first try to solve this problem, would be to use the same controller for several views.
        But as we have seen Controllers are not singletons so each view will create <em>its own instance</em> of the
        controller.</p>
      <p>This problem goes even further in that the same view will create a new instance each time you navigate back to
        that view.</p>
      <p>The solution to this problem is to refactor you code into an <em style="font-weight: bold">Angular Service
        since services are Singletons</em>.</p>

    </article>
  </slide>
  <slide>
    <hgroup>
      <h2>Angular Services</h2>
    </hgroup>
    <article>
      <p style="margin-top: -20px;">Angular services are functions or objects that can hold behavior or state across our
        application and are wired together using dependency injection (DI).</p>
      <p>Use services to organize and share code across your app</p>
      <p>Angular services are:</p>
      <ul>
        <li><b>Lazily instantiated</b> – Angular only instantiates a service when an application component depends on
          it.
        </li>
        <li><b>Singletons</b> – Each component dependent on a service gets a reference to the <em>single</em> instance
          generated
          by
          the
          service factory.
        </li>
        <li>Usable by any other component such as controllers, directives, filters, etc.</li>
      </ul>
      Angular offers several useful services (like $http), but for most applications you'll also want to create your
      own.</p>
    </article>
  </slide>
  <slide>
    <hgroup>
      <h2>Creating Services</h2>
    </hgroup>
    <article>
      <p style="margin-top: -25px;">Services can be created in several ways (with a <em>factory</em>, or a <em>service</em> or a <em>provider</em>)</p>
      <p>This week we will only show how to do it via a factory</p>
<pre class="prettyprint pre16">
app.<span style="font-size: 1.3em;font-weight: bolder">factory</span>('MyService', function () {
  var message = "Message from factory";
  return {
    getMessage: function () {
      return message;
    }
  };
});
</pre>
        <p style="font-size: 0.7em;;color:#000088;">Here we return an object with one or more functions/properties <br/>
          If a function in your return-object refer to local variables (message in the example) the function will become
          a <em>closure</em>, and the variable will continue to be available for the function </p>
        <p>Using the (factory) Service</p>
<pre class="prettyprint pre16">
//Observe how the service is injected into the controller
app.controller('AppCtrl', function (MyService) {
  var self = this;
  self.msgFromFactory = MyFactory.getMessage();
});
</pre>
    </article>
  </slide>


  <slide>
    <hgroup>
      <h2>Refactor Controller Logic into a Service</h2>
    </hgroup>
    <article>
      <p>Lets refactor the internal logic of the ProductController into an Angular Service</p>
      <img  style="margin:50px;width:25%" src="../images/Demo.png">
    </article>
  </slide>

  <script>
    $(document).ready(function () {
      $("#view5").exPresenter({
        directory: "examples/ex1-views/",
        codeClass: "prettyprint pre16",
        codeStyle: "height:310px;",
        presenterStyle: "display:none",
        manifest: "manifest3.json"
      });
    })
  </script>
  <slide>
    <hgroup>
      <h2>Whats with hashtag # ?</h2>
    </hgroup>
    <article>

      <p style="margin-top: -25px;">
        The # is an old browser short circuit which doesn't fire the request to the server.
        That is we can handle the request on the client, instead of sending it to the server.
        It is needed to support non-html5 browsers
      </p>
      <div>
        <div id="view5"/>
      </div>
      <p class="smaller">Angular has a service which can alter this behaviour
        <b>$locationProvider.html5Mode(true)</b>,<br/> but there are
        many things you should focus on before you start to play around with this</p>
    </article>
  </slide>


  <slide class="nobackground" style="background: #00163B">
    <aside class="gdbar right"><img src="../images/logo.png" style="width: 200px;"></aside>
    <hgroup>

    </hgroup>
    <article class="flexbox  auto-fadein" style="margin-top: 25%;">
      <h2>Rest of today; Exercises :-)</h2>

    </article>
    <p class="auto-fadein" data-config-contact>
      <!-- populated from slide_config.json -->
    </p>
  </slide>


  <slide class="backdrop"></slide>

</slides>

<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
  _gaq.push(['_trackPageview']);

  (function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
  })();
</script>

<!--[if IE]>
<script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
<script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
